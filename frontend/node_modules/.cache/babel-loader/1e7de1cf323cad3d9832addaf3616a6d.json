{"ast":null,"code":"var _jsxFileName = \"/home/moss/OJT/src/Pages/UserInfoPw.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport crypto from 'crypto';\nimport { Link } from 'react-router-dom';\nimport '../App.css';\nimport 'antd/dist/antd.css';\nimport { Layout, Menu, Form, Input, Button, message } from 'antd';\nimport { DesktopOutlined, PieChartOutlined, FileOutlined, TeamOutlined, UserOutlined } from '@ant-design/icons';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Header,\n  Content,\n  Sider\n} = Layout;\nconst {\n  SubMenu\n} = Menu;\n\nconst FormLayoutDemo = () => {\n  _s();\n\n  const [form] = Form.useForm();\n  const [formLayout, setFormLayout] = useState('horizontal');\n  const [reqInProgress, setReqInProgress] = useState(false);\n\n  const onFormLayoutChange = ({\n    layout\n  }) => {\n    setFormLayout(layout);\n  };\n\n  const formItemLayout = formLayout === 'horizontal' ? {\n    labelCol: {\n      span: 4\n    },\n    wrapperCol: {\n      span: 14\n    }\n  } : null;\n  const buttonItemLayout = formLayout === 'horizontal' ? {\n    wrapperCol: {\n      span: 14,\n      offset: 4\n    }\n  } : null;\n\n  const updatePw = values => {\n    setReqInProgress(true);\n    const id = window.sessionStorage.getItem('id');\n    const oldpw = crypto.createHash('sha512').update(values.oldpw).digest('base64');\n    const newpw = crypto.createHash('sha512').update(values.newpw).digest('base64');\n    let p;\n    let auth = false;\n    const old_data = {\n      \"header\": {\n        \"DATA_TYPE\": \"3\"\n      },\n      \"dto\": {\n        \"USER_ID\": id\n      }\n    };\n    axios.post('http://192.1.4.246:14000/AB3-5/OJTWEB/ReadUserAccount?action=SO', old_data).then(response => {\n      // console.log('old post data: '+JSON.stringify(old_data))\n      // console.log(response)\n      p = response.data.dto.USER_PW;\n\n      if (oldpw != p) {\n        message.error('잘못된 비밀번호입니다.');\n        setReqInProgress(false);\n      } else {\n        const new_data = {\n          \"header\": {\n            \"DATA_TYPE\": \"3\"\n          },\n          \"dto\": {\n            \"USER_ID\": id,\n            \"USER_PW\": newpw\n          }\n        }; // console.log('auth true!')\n\n        axios.post('http://192.1.4.246:14000/AB3-5/OJTWEB/UpdatePWUserAccount?action=SO', new_data).then(response => {\n          // console.log('new post data: '+JSON.stringify(new_data))\n          // console.log('update')\n          setTimeout(() => {\n            message.success('비밀번호가 변경되었습니다.');\n            setReqInProgress(false);\n          }, 1000);\n        }).catch(error => {\n          message.error('비밀번호 변경에 실패하였습니다.');\n          setReqInProgress(false);\n        });\n      } // alert('비밀번호를 변경하였습니다.')\n\n    }).catch(error => {\n      message.error('서버와의 통신에 실패하였습니다.');\n      setReqInProgress(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      style: {\n        margin: 'auto',\n        maxWidth: '40vw',\n        paddingRight: '30px'\n      },\n      ...formItemLayout,\n      layout: formLayout,\n      form: form,\n      initialValues: {\n        layout: formLayout\n      },\n      onValuesChange: onFormLayoutChange,\n      onFinish: updatePw,\n      children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"oldpw\",\n        label: \"\\uD604\\uC7AC \\uBE44\\uBC00\\uBC88\\uD638\",\n        rules: [{\n          required: true,\n          message: '현재 비밀번호를 입력해주세요.'\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input.Password, {\n          disabled: reqInProgress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        name: \"newpw\",\n        label: \"\\uC0C8\\uB85C\\uC6B4 \\uBE44\\uBC00\\uBC88\\uD638\",\n        rules: [{\n          required: true,\n          message: '변경할 비밀번호를 입력해주세요.'\n        }],\n        children: /*#__PURE__*/_jsxDEV(Input.Password, {\n          disabled: reqInProgress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, { ...buttonItemLayout,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          loading: reqInProgress,\n          children: \"\\uBCC0\\uACBD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(FormLayoutDemo, \"lqW+3K2bFCIdkg+tmfACW0PUpog=\", false, function () {\n  return [Form.useForm];\n});\n\n_c = FormLayoutDemo;\n\nclass SiderDemo extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      collapsed: false\n    };\n\n    this.onCollapse = collapsed => {\n      console.log(collapsed);\n      this.setState({\n        collapsed\n      });\n    };\n  }\n\n  handleClick() {\n    window.location.href = \"http://aria.sparcs.org:32785\";\n    window.sessionStorage.clear();\n    window.location.reload();\n  }\n\n  render() {\n    const {\n      collapsed\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      style: {\n        minHeight: '100vh'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Sider, {\n        collapsible: true,\n        collapsed: collapsed,\n        onCollapse: this.onCollapse,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Menu, {\n          theme: \"dark\",\n          defaultOpenKeys: ['sub1'],\n          defaultSelectedKeys: ['4'],\n          mode: \"inline\",\n          children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n            icon: /*#__PURE__*/_jsxDEV(TeamOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 38\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/main\",\n              children: \"\\uD648\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this)\n          }, \"1\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n            icon: /*#__PURE__*/_jsxDEV(PieChartOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 38\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/card\",\n              children: \"\\uCE74\\uB4DC \\uAD00\\uB9AC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this)\n          }, \"2\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n            icon: /*#__PURE__*/_jsxDEV(DesktopOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 38\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/payment\",\n              children: \"\\uACB0\\uC81C \\uB0B4\\uC5ED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this)\n          }, \"3\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SubMenu, {\n            icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 39\n            }, this),\n            title: \"\\uD68C\\uC6D0 \\uC815\\uBCF4\",\n            children: /*#__PURE__*/_jsxDEV(Menu.Item, {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/userinfo/pw\",\n                children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uBCC0\\uACBD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 34\n              }, this)\n            }, \"4\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)\n          }, \"sub1\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 2\n      }, this), /*#__PURE__*/_jsxDEV(Layout, {\n        className: \"site-layout\",\n        children: [/*#__PURE__*/_jsxDEV(Header, {\n          className: \"site-layout-background\",\n          style: {\n            padding: 0\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: this.handleClick,\n            style: {\n              float: 'right',\n              margin: 15\n            },\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Content, {\n          style: {\n            paddingTop: '10vw',\n            paddingLeft: '5vw'\n          },\n          children: /*#__PURE__*/_jsxDEV(FormLayoutDemo, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nfunction UserInfoPw() {\n  return /*#__PURE__*/_jsxDEV(SiderDemo, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 201,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = UserInfoPw;\nexport default UserInfoPw;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"FormLayoutDemo\");\n$RefreshReg$(_c2, \"UserInfoPw\");","map":{"version":3,"sources":["/home/moss/OJT/src/Pages/UserInfoPw.js"],"names":["React","useState","crypto","Link","Layout","Menu","Form","Input","Button","message","DesktopOutlined","PieChartOutlined","FileOutlined","TeamOutlined","UserOutlined","axios","Header","Content","Sider","SubMenu","FormLayoutDemo","form","useForm","formLayout","setFormLayout","reqInProgress","setReqInProgress","onFormLayoutChange","layout","formItemLayout","labelCol","span","wrapperCol","buttonItemLayout","offset","updatePw","values","id","window","sessionStorage","getItem","oldpw","createHash","update","digest","newpw","p","auth","old_data","post","then","response","data","dto","USER_PW","error","new_data","setTimeout","success","catch","margin","maxWidth","paddingRight","required","SiderDemo","Component","state","collapsed","onCollapse","console","log","setState","handleClick","location","href","clear","reload","render","minHeight","padding","float","paddingTop","paddingLeft","UserInfoPw"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport crypto from 'crypto';\n\nimport { Link } from 'react-router-dom';\nimport '../App.css';\nimport 'antd/dist/antd.css';\nimport { Layout, Menu, Form, Input, Button, message } from 'antd';\nimport {\n  DesktopOutlined,\n  PieChartOutlined,\n  FileOutlined,\n  TeamOutlined,\n  UserOutlined,\n} from '@ant-design/icons';\nimport axios from 'axios';\n\nconst { Header, Content, Sider } = Layout;\nconst { SubMenu } = Menu;\n\nconst FormLayoutDemo = () => {\n  const [form] = Form.useForm();\n  const [formLayout, setFormLayout] = useState('horizontal');\n  const [reqInProgress, setReqInProgress] = useState(false);\n\n  const onFormLayoutChange = ({ layout }) => {\n    setFormLayout(layout);\n  };\n\n  const formItemLayout =\n    formLayout === 'horizontal'\n      ? {\n          labelCol: {\n            span: 4,\n          },\n          wrapperCol: {\n            span: 14,\n          },\n        }\n      : null;\n  const buttonItemLayout =\n    formLayout === 'horizontal'\n      ? {\n          wrapperCol: {\n            span: 14,\n            offset: 4,\n          },\n        }\n      : null;\n\n\n  const updatePw = (values) => {\n    setReqInProgress(true);\n    const id = window.sessionStorage.getItem('id');\n    const oldpw = crypto.createHash('sha512').update(values.oldpw).digest('base64');\n    const newpw = crypto.createHash('sha512').update(values.newpw).digest('base64');\n    let p;\n    let auth = false;\n    const old_data = {\n      \"header\": {\n          \"DATA_TYPE\": \"3\"\n      },\n      \"dto\": {\n          \"USER_ID\": id\n      }\n    }\n\n    axios.post('http://192.1.4.246:14000/AB3-5/OJTWEB/ReadUserAccount?action=SO', old_data).then(response => {\n      // console.log('old post data: '+JSON.stringify(old_data))\n      // console.log(response)\n      p = response.data.dto.USER_PW;\n      if (oldpw != p){\n        message.error('잘못된 비밀번호입니다.')\n        setReqInProgress(false)\n      } else {\n        const new_data = {\n          \"header\": {\n              \"DATA_TYPE\": \"3\"\n          },\n          \"dto\": {\n              \"USER_ID\": id,\n              \"USER_PW\": newpw,\n          }\n        }\n          // console.log('auth true!')\n        axios.post('http://192.1.4.246:14000/AB3-5/OJTWEB/UpdatePWUserAccount?action=SO', new_data).then(response => {\n          // console.log('new post data: '+JSON.stringify(new_data))\n          // console.log('update')\n          setTimeout(() => {\n            message.success('비밀번호가 변경되었습니다.')\n            setReqInProgress(false)\n          }, 1000);\n        }).catch(error => {\n          message.error('비밀번호 변경에 실패하였습니다.')\n          setReqInProgress(false)\n        });\n      }\n      // alert('비밀번호를 변경하였습니다.')\n    }).catch(error => {\n      message.error('서버와의 통신에 실패하였습니다.')\n      setReqInProgress(false)\n    });\n  }\n\n  return (\n    <>\n      <Form style = {{margin: 'auto', maxWidth: '40vw', paddingRight: '30px'}}\n        {...formItemLayout}\n        layout={formLayout}\n        form={form}\n        initialValues={{\n          layout: formLayout,\n        }}\n        onValuesChange={onFormLayoutChange}\n        onFinish={updatePw}\n      >\n        <Form.Item name=\"oldpw\" label=\"현재 비밀번호\"\n          rules={[\n            {\n              required: true,\n              message: '현재 비밀번호를 입력해주세요.',\n            },\n          ]}\n          >\n          <Input.Password disabled={reqInProgress}/>\n        </Form.Item>\n        <Form.Item name=\"newpw\" label=\"새로운 비밀번호\"\n            rules={[\n              {\n                required: true,\n                message: '변경할 비밀번호를 입력해주세요.',\n              },\n            ]}\n            >\n          <Input.Password disabled={reqInProgress}/>\n        </Form.Item>\n\n        <Form.Item {...buttonItemLayout}>\n          <Button type=\"primary\" htmlType=\"submit\" loading={reqInProgress}>변경</Button>\n        </Form.Item>\n\n      </Form>\n    </>\n  );\n};\n\nclass SiderDemo extends React.Component {\n  state = {\n    collapsed: false,\n  };\n\n  onCollapse = collapsed => {\n    console.log(collapsed);\n    this.setState({ collapsed });\n  };\n\n  handleClick(){\n    window.location.href = \"http://aria.sparcs.org:32785\";\n    window.sessionStorage.clear();\n    window.location.reload();\n  }\n\n  render() {\n    const { collapsed } = this.state;\n    return (\n      <Layout style={{ minHeight: '100vh' }}>\n <Sider collapsible collapsed={collapsed} onCollapse={this.onCollapse}>\n          <div className=\"logo\" />\n          <Menu theme=\"dark\" defaultOpenKeys={['sub1']} defaultSelectedKeys={['4']} mode=\"inline\">\n            <Menu.Item key=\"1\" icon={<TeamOutlined />}>\n              <Link to=\"/main\">홈</Link>\n            </Menu.Item>\n            <Menu.Item key=\"2\" icon={<PieChartOutlined />}>\n              <Link to=\"/card\">카드 관리</Link>\n            </Menu.Item>\n            <Menu.Item key=\"3\" icon={<DesktopOutlined />}>\n              <Link to=\"/payment\">결제 내역</Link>\n            </Menu.Item>\n            <SubMenu key=\"sub1\" icon={<UserOutlined />} title=\"회원 정보\">\n              <Menu.Item key=\"4\"><Link to=\"/userinfo/pw\">비밀번호 변경</Link></Menu.Item>\n              {/* <Menu.Item key=\"5\"><Link to=\"/userinfo/change\">회원정보 수정</Link></Menu.Item> */}\n            </SubMenu>\n          </Menu>\n        </Sider>\n        <Layout className=\"site-layout\">\n          <Header className=\"site-layout-background\" style={{ padding: 0 }}>\n            <Button onClick={this.handleClick} style={{ float: 'right', margin: 15}}>\n              Logout\n            </Button>\n          </Header>\n          <Content style={{ paddingTop: '10vw', paddingLeft: '5vw' }}>\n            <FormLayoutDemo />\n          </Content>\n        </Layout>\n      </Layout>\n    );\n  }\n}\n\nfunction UserInfoPw() {\n  return (\n    <SiderDemo />\n  );\n}\n\nexport default UserInfoPw;\n"]},"metadata":{},"sourceType":"module"}